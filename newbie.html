<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI for Beginners</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://unpkg.com/swiper/swiper-bundle.min.css" />
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script> <!-- Chart.js Added -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            color: #333;
            line-height: 1.6;
        }
        .animated-gradient {
            background: linear-gradient(-45deg, #ee7752, #e73c7e, #23a6d5, #23d5ab);
            background-size: 400% 400%;
            animation: gradient 15s ease infinite;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100vh;
            z-index: -1;
        }
        @keyframes gradient {
            0% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
            100% { background-position: 0% 50%; }
        }
        .frosted-glass {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .spotlight-card {
            position: relative;
            overflow: hidden;
        }
        .spotlight-card::before {
            content: '';
            position: absolute;
            top: var(--y);
            left: var(--x);
            transform: translate(-50%, -50%);
            width: 300px;
            height: 300px;
            background: radial-gradient(circle, var(--spotlight-color) 0%, transparent 70%);
            opacity: 0;
            transition: opacity 0.5s;
            pointer-events: none;
        }
        .spotlight-card:hover::before {
            opacity: 1;
        }
        .fade-in {
            animation: fadeIn 1s ease-in-out;
        }
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        
        /* Timeline Styles */
        .timeline-item {
            position: relative;
            padding-bottom: 2.5rem;
            padding-left: 2.5rem;
            border-left: 2px solid rgba(255, 255, 255, 0.5);
        }
        .timeline-item:last-child {
            border-left: 2px solid transparent;
        }
        .timeline-dot {
            position: absolute;
            left: -0.7rem;
            top: 0;
            height: 1.25rem;
            width: 1.25rem;
            border-radius: 50%;
            background-color: white;
            border: 4px solid #8B5CF6; /* A nice purple color */
        }

        /* Expander Styles */
        .expander-content {
            max-height: 0;
            overflow: hidden;
            transition: max-height 0.7s ease-in-out;
        }

        /* Swiper Slider Styles */
        .swiper-container {
            width: 100%;
            padding-top: 20px;
            padding-bottom: 50px; /* Space for pagination */
        }
        .swiper-slide {
            background-position: center;
            background-size: cover;
            width: 300px; /* Adjust slide width */
            height: auto;
        }
        .swiper-button-next, .swiper-button-prev {
            color: #ffffff !important;
            background-color: rgba(0, 0, 0, 0.2);
            border-radius: 9999px;
            width: 44px;
            height: 44px;
            transition: background-color 0.3s;
        }
        .swiper-button-next:hover, .swiper-button-prev:hover {
             background-color: rgba(0, 0, 0, 0.4);
        }
        .swiper-button-next::after, .swiper-button-prev::after {
            font-size: 20px !important;
            font-weight: bold;
        }
        .swiper-pagination-bullet-active {
            background: #ffffff !important;
        }
    </style>
</head>
<body class="bg-gray-100">
    <div class="animated-gradient"></div>
    <div class="relative min-h-screen px-4 py-8 sm:px-6 lg:px-8">
        <header class="flex justify-between items-center mb-16">
            <a href="index.html" class="text-2xl font-bold text-white tracking-tight">AI Insights</a>
            <nav>
                <a href="index.html" class="text-white hover:text-gray-200 transition duration-300 font-medium">← Back to Selection</a>
            </nav>
        </header>

        <main class="max-w-7xl mx-auto space-y-20">
            <!-- Hero Section -->
            <section class="text-center fade-in frosted-glass p-8 rounded-2xl shadow-xl">
                <h1 class="text-4xl sm:text-5xl md:text-6xl font-extrabold text-gray-800 tracking-tight">
                    Welcome to the World of AI.
                </h1>
                <p class="mt-6 max-w-3xl mx-auto text-lg text-gray-700">
                    Artificial Intelligence is not just for scientists and engineers anymore. It's a part of our daily lives, making things simpler, smarter, and more exciting. Let's explore it together with simple ideas and fun examples.
                </p>
            </section>

            <!-- Core Concepts Section -->
            <section class="fade-in" style="animation-delay: 0.2s;">
                <h2 class="text-3xl font-bold text-center text-white mb-12">Core Concepts Made Simple</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1: AI -->
                    <div id="concept-1" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg text-center" style="--spotlight-color: rgba(102, 166, 255, 0.8);">
                        <h3 class="text-2xl font-bold text-gray-800">Artificial Intelligence</h3>
                        <p class="mt-4 text-gray-700">The big idea of making computers think and learn like humans. It’s the entire universe of smart machines.</p>
                        <p class="mt-4 text-gray-600 italic"><b>Analogy:</b> It's like a giant library where a book can read itself and then tell you its story.</p>
                    </div>
                    <!-- Card 2: ML -->
                    <div id="concept-2" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg text-center" style="--spotlight-color: rgba(231, 60, 126, 0.8);">
                        <h3 class="text-2xl font-bold text-gray-800">Machine Learning</h3>
                        <p class="mt-4 text-gray-700">A way to achieve AI. Instead of giving computers rules, we give them lots of data and let them learn the rules themselves.</p>
                        <p class="mt-4 text-gray-600 italic"><b>Analogy:</b> Teaching a dog a new trick. You don't write instructions; you show it examples and give it treats until it learns.</p>
                    </div>
                    <!-- Card 3: DL -->
                    <div id="concept-3" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg text-center" style="--spotlight-color: rgba(254, 180, 123, 0.8);">
                        <h3 class="text-2xl font-bold text-gray-800">Deep Learning</h3>
                        <p class="mt-4 text-gray-700">An advanced type of Machine Learning inspired by the human brain. It uses "neural networks" to find complex patterns in data.</p>
                        <p class="mt-4 text-gray-600 italic"><b>Analogy:</b> A team of detectives, where each one looks for a tiny clue. Together, they solve a huge mystery that no single detective could.</p>
                    </div>
                </div>
            </section>

            <!-- A Day with AI Timeline Section -->
            <section class="fade-in" style="animation-delay: 0.4s;">
                <h2 class="text-3xl font-bold text-center text-white mb-12">A Day with AI: You're Already Using It!</h2>
                <div class="max-w-3xl mx-auto frosted-glass p-8 rounded-2xl shadow-lg">
                    <div class="relative">
                        <!-- Timeline Item 1 -->
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="text-gray-800">
                                <h4 class="font-bold text-lg">Morning: Your Social Media Feed</h4>
                                <p class="text-gray-700">The first thing you see isn't random. An AI algorithm has organized your feed to show you what it thinks you'll find most interesting.</p>
                            </div>
                        </div>
                        <!-- Timeline Item 2 -->
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                            <div class="text-gray-800">
                                <h4 class="font-bold text-lg">Commute: Traffic Predictions</h4>
                                <p class="text-gray-700">Navigation apps like Google Maps use AI to analyze traffic data in real-time, predicting the fastest route for your morning commute.</p>
                            </div>
                        </div>
                        <!-- Timeline Item 3 -->
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                             <div class="text-gray-800">
                                <h4 class="font-bold text-lg">Work: Spam Filters</h4>
                                <p class="text-gray-700">Your email client's AI is constantly learning what junk mail looks like, protecting your inbox from spam and phishing attacks.</p>
                            </div>
                        </div>
                         <!-- Timeline Item 4 -->
                        <div class="timeline-item">
                            <div class="timeline-dot"></div>
                             <div class="text-gray-800">
                                <h4 class="font-bold text-lg">Evening: Movie Recommendations</h4>
                                <p class="text-gray-700">When you relax with Netflix, an AI is analyzing your viewing history to suggest what you should watch next. It's why you always find something new to enjoy!</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

             <!-- Movie Recommender Section -->
            <section class="fade-in" style="animation-delay: 0.6s;">
                <div class="frosted-glass p-8 rounded-2xl shadow-lg text-center">
                    <button id="expander-btn" class="w-full text-left">
                        <h2 class="text-3xl font-bold text-gray-800 text-center">Wanna try something fun?</h2>
                        <p class="text-center text-gray-700 mt-2">Click here to see a real Machine Learning algorithm in action!</p>
                    </button>
                    <div id="expander-content" class="expander-content mt-6">
                        <p class="text-gray-700 max-w-2xl mx-auto mb-6">This tool uses a real algorithm called **Cosine Similarity**. It reads the plot summaries of movies to find which ones are most alike. Enter a movie from the list below and see what it recommends!</p>
                        <div class="flex flex-col sm:flex-row gap-4 justify-center">
                            <input type="text" id="movie-input" list="movie-list" placeholder="Start typing a movie title..." class="w-full sm:w-auto flex-grow px-4 py-3 rounded-lg bg-white/50 border border-white/30 text-gray-800 placeholder-gray-600 focus:outline-none focus:ring-2 focus:ring-pink-500 transition">
                            <datalist id="movie-list"></datalist>
                            <button id="recommend-btn" class="bg-pink-500 hover:bg-pink-600 text-white font-bold py-3 px-6 rounded-lg transition duration-300 shadow-lg">Recommend</button>
                        </div>
                        <div id="results-container" class="mt-8 text-left w-full relative">
                           <h4 id="results-title" class="text-xl font-bold text-gray-800 text-center mb-4 hidden">Top 5 Recommendations:</h4>
                            <!-- Swiper -->
                            <div class="swiper-container mySwiper">
                                <div class="swiper-wrapper" id="results">
                                    <!-- Slides will be injected here -->
                                </div>
                                <!-- Add Pagination -->
                                <div class="swiper-pagination"></div>
                            </div>
                             <!-- Add Navigation -->
                            <div class="swiper-button-next"></div>
                            <div class="swiper-button-prev"></div>
                        </div>
                        <div id="error-msg" class="mt-4 text-red-500 font-medium"></div>
                    </div>
                </div>
            </section>

            <!-- NEW: AI Growth and Evolution Section -->
            <section class="fade-in frosted-glass p-8 rounded-2xl shadow-lg" style="animation-delay: 0.7s;">
                <h2 class="text-3xl font-bold text-center text-gray-800 mb-12">The Rapid Rise of AI</h2>
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-12 items-center">
                    <!-- AI Growth Chart -->
                    <div>
                        <h3 class="text-2xl font-bold text-gray-800 mb-4 text-center">AI Market Growth (Billion USD)</h3>
                        <canvas id="aiGrowthChart"></canvas>
                    </div>
                    <!-- Chatbot Evolution -->
                    <div>
                         <h3 class="text-2xl font-bold text-gray-800 mb-6 text-center">From ELIZA to Gemini</h3>
                         <div class="space-y-4">
                            <div class="p-4 bg-white/30 rounded-lg shadow-inner">
                                <p class="font-bold text-gray-800">1966: ELIZA</p>
                                <p class="text-sm text-gray-700">One of the first chatbots, mimicking a psychotherapist by recognizing keywords.</p>
                            </div>
                            <div class="p-4 bg-white/30 rounded-lg shadow-inner">
                                <p class="font-bold text-gray-800">2010s: Virtual Assistants</p>
                                <p class="text-sm text-gray-700">Siri, Alexa, and Google Assistant bring conversational AI into our homes and pockets.</p>
                            </div>
                            <div class="p-4 bg-white/30 rounded-lg shadow-inner">
                                <p class="font-bold text-gray-800">2017: The "Transformer"</p>
                                <p class="text-sm text-gray-700">A new architecture is invented, forming the foundation for modern language models.</p>
                            </div>
                            <div class="p-4 bg-white/30 rounded-lg shadow-inner">
                                <p class="font-bold text-gray-800">2020s: Generative AI</p>
                                <p class="text-sm text-gray-700">Models like ChatGPT and Gemini can now create human-like text, code, and images, changing the world.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Testimonials Section -->
            <section id="testimonials-section" class="fade-in" style="animation-delay: 0.8s;">
                <h2 class="text-3xl font-bold text-center text-white mb-12">What the Experts are Saying</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                    <!-- Card 1 -->
                    <div id="testimonial-1" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg" style="--spotlight-color: rgba(102, 166, 255, 0.8);">
                        <div class="testimonial-content">
                            <p class="text-lg text-gray-700">"AI is probably the most important thing humanity has ever worked on. I think of it as something more profound than electricity or fire."</p>
                            <p class="mt-6 font-bold text-gray-800">- Sundar Pichai</p>
                            <p class="text-sm text-gray-600">CEO of Google</p>
                        </div>
                    </div>
                    <!-- Card 2 -->
                    <div id="testimonial-2" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg" style="--spotlight-color: rgba(231, 60, 126, 0.8);">
                        <div class="testimonial-content">
                            <p class="text-lg text-gray-700">"Artificial intelligence is the new electricity. Just as electricity transformed almost everything 100 years ago, today I actually have a hard time thinking of an industry that I don’t think AI will transform in the next several years."</p>
                             <p class="mt-6 font-bold text-gray-800">- Andrew Ng</p>
                             <p class="text-sm text-gray-600">Founder of Coursera</p>
                        </div>
                    </div>
                    <!-- Card 3 -->
                    <div id="testimonial-3" class="spotlight-card frosted-glass p-8 rounded-2xl shadow-lg" style="--spotlight-color: rgba(254, 180, 123, 0.8);">
                        <div class="testimonial-content">
                            <p class="text-lg text-gray-700">"As a technologist, I see how AI and the fourth industrial revolution will impact every aspect of people's lives."</p>
                             <p class="mt-6 font-bold text-gray-800">- Dr. Fei-Fei Li</p>
                             <p class="text-sm text-gray-600">Professor at Stanford University</p>
                        </div>
                    </div>
                </div>
            </section>
        </main>

        <!-- NEW: Conclusion Section -->
        <section class="text-center fade-in frosted-glass p-8 rounded-2xl shadow-xl" style="animation-delay: 0.9s;">
            <h2 class="text-3xl font-bold text-gray-800">Your Journey Begins Now</h2>
            <p class="mt-4 max-w-3xl mx-auto text-lg text-gray-700">
                Congratulations! You've taken your first step into the amazing world of Artificial Intelligence. As you've seen, AI is not a far-off fantasy; it's a powerful tool that's already shaping our lives in incredible ways. Keep exploring, stay curious, and see where your AI journey takes you!
            </p>
        </section>

        <footer class="text-center py-8 mt-20">
            <p class="text-white/70">Built with guidance from you. AI Insights.</p>
        </footer>
    </div>
    
    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>
    <script>
        // Spotlight effect script
        document.querySelectorAll('.spotlight-card').forEach(card => {
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left;
                const y = e.clientY - rect.top;
                card.style.setProperty('--x', `${x}px`);
                card.style.setProperty('--y', `${y}px`);
            });
        });

        // Expander script
        const expanderBtn = document.getElementById('expander-btn');
        const expanderContent = document.getElementById('expander-content');
        expanderBtn.addEventListener('click', () => {
            if (expanderContent.style.maxHeight) {
                expanderContent.style.maxHeight = null;
            } else {
                expanderContent.style.maxHeight = expanderContent.scrollHeight + "px";
            }
        });

        // --- Movie Recommender Logic ---
        const movies = [
            { title: 'The Shawshank Redemption', overview: 'Two imprisoned men bond over a number of years, finding solace and eventual redemption through acts of common decency.', poster: 'https://image.tmdb.org/t/p/w500/q6y0Go1tsGEsmtFryDOJo3dEmqu.jpg', rating: 9.3 },
            { title: 'The Godfather', overview: 'An organized crime dynasty\'s aging patriarch transfers control of his clandestine empire to his reluctant son.', poster: 'https://image.tmdb.org/t/p/w500/3bhkrj58Vtu7enYsRolD1fZdja1.jpg', rating: 9.2 },
            { title: 'The Dark Knight', overview: 'When the menace known as the Joker wreaks havoc and chaos on the people of Gotham, Batman must accept one of the greatest psychological and physical tests of his ability to fight injustice.', poster: 'https://image.tmdb.org/t/p/w500/qJ2tW6WMUDux911r6m7haRef0WH.jpg', rating: 9.0 },
            { title: 'Pulp Fiction', overview: 'The lives of two mob hitmen, a boxer, a gangster and his wife, and a pair of diner bandits intertwine in four tales of violence and redemption.', poster: 'https://image.tmdb.org/t/p/w500/d5iIlFn5s0ImszYzBPb8JPIfbXD.jpg', rating: 8.9 },
            { title: 'Forrest Gump', overview: 'The presidencies of Kennedy and Johnson, the Vietnam War, the Watergate scandal and other historical events unfold from the perspective of an Alabama man with an IQ of 75, whose only desire is to be reunited with his childhood sweetheart.', poster: 'https://image.tmdb.org/t/p/w500/arw2vcBveWOVZr6pxd9XTd1TdSm.jpg', rating: 8.8 },
            { title: 'Inception', overview: 'A thief who steals corporate secrets through the use of dream-sharing technology is given the inverse task of planting an idea into the mind of a C.E.O.', poster: 'https://image.tmdb.org/t/p/w500/9gk7adHYeDvHkCSEqAvQNLV5Uge.jpg', rating: 8.8 },
            { title: 'The Matrix', overview: 'A computer hacker learns from mysterious rebels about the true nature of his reality and his role in the war against its controllers.', poster: 'https://image.tmdb.org/t/p/w500/f89U3ADr1oiB1s9GkdPOEpXUk5H.jpg', rating: 8.7 },
            { title: 'Interstellar', overview: 'A team of explorers travel through a wormhole in space in an attempt to ensure humanity\'s survival.', poster: 'https://image.tmdb.org/t/p/w500/gEU2QniE6E77NI6lCU6MxlNBvIx.jpg', rating: 8.6 },
            { title: 'Parasite', overview: 'Greed and class discrimination threaten the newly formed symbiotic relationship between the wealthy Park family and the destitute Kim clan.', poster: 'https://image.tmdb.org/t/p/w500/7IiTTgloJzvGI1TAYymCfbfl3vT.jpg', rating: 8.6 },
            { title: 'Gladiator', overview: 'A former Roman General sets out to exact vengeance against the corrupt emperor who murdered his family and sent him into slavery.', poster: 'https://image.tmdb.org/t/p/w500/ty8TGRS3bAUqiJFATunAAbjso4T.jpg', rating: 8.5 },
            { title: 'The Lion King', overview: 'A young lion prince is cast out of his pride by his cruel uncle, who claims he killed his father. While the uncle rules with an iron fist, the prince grows up beyond the Savannah, living by a philosophy: No worries for the rest of your days.', poster: 'https://image.tmdb.org/t/p/w500/sKCr78MXSLB1rUvIl4JwRneYfvr.jpg', rating: 8.5 },
            { title: 'Toy Story', overview: 'A cowboy doll is profoundly threatened and jealous when a new spaceman figure supplants him as top toy in a boy\'s room.', poster: 'https://image.tmdb.org/t/p/w500/uXDfjJbdP4ijW5hWSBrPrlKpxab.jpg', rating: 8.3 },
            { title: 'Avatar', overview: 'A paraplegic Marine dispatched to the moon Pandora on a unique mission becomes torn between following orders and protecting the world he feels is his home.', poster: 'https://image.tmdb.org/t/p/w500/jRXYjXNq0Cs2TcJjLkki24MLp7u.jpg', rating: 7.8 },
            { title: 'Joker', overview: 'In Gotham City, mentally troubled comedian Arthur Fleck is disregarded and mistreated by society. He then embarks on a downward spiral of revolution and bloody crime. This path brings him face-to-face with his alter-ego: the Joker.', poster: 'https://image.tmdb.org/t/p/w500/udDclJoHjfjb8Ekgsd4FDteOkCU.jpg', rating: 8.4 },
            { title: 'Titanic', overview: 'A seventeen-year-old aristocrat falls in love with a kind but poor artist aboard the luxurious, ill-fated R.M.S. Titanic.', poster: 'https://image.tmdb.org/t/p/w500/9xjZS2rlVxm8SFx8kPC3aIGCOYQ.jpg', rating: 7.8 },
            { title: 'Finding Nemo', overview: 'After his son is captured in the Great Barrier Reef and taken to Sydney, a timid clownfish sets out on a journey to bring him home.', poster: 'https://image.tmdb.org/t/p/w500/eHuGQ10FUzK1mdOY69wF5pGgEf5.jpg', rating: 8.1 },
            { title: 'Up', overview: 'Seventy-eight year old Carl Fredricksen travels to Paradise Falls in his home equipped with balloons, inadvertently taking a young stowaway.', poster: 'https://image.tmdb.org/t/p/w500/l8hrSL5N2a1wI4eY5yYk9v2iT29.jpg', rating: 8.2 },
            { title: 'WALL·E', overview: 'In the distant future, a small waste-collecting robot inadvertently embarks on a space journey that will ultimately decide the fate of mankind.', poster: 'https://image.tmdb.org/t/p/w500/hbhFnRzzg6ZDmm8YAmxBnQpQIPh.jpg', rating: 8.4 },
            { title: 'Coco', overview: 'Aspiring musician Miguel, confronted with his family\'s ancestral ban on music, enters the Land of the Dead to find his great-great-grandfather, a legendary singer.', poster: 'https://image.tmdb.org/t/p/w500/gGEsBPAijhVUFoiNpgZXqRVWJt2.jpg', rating: 8.4 },
            { title: 'Shrek', overview: 'A mean lord exiles fairytale creatures to the swamp of a grumpy ogre, who must go on a quest and rescue a princess for the lord in order to get his land back.', poster: 'https://image.tmdb.org/t/p/w500/iB64vpL3dI6r2J4vA4DQiS1hdjF.jpg', rating: 7.8 }
        ];

        const movieInput = document.getElementById('movie-input');
        const recommendBtn = document.getElementById('recommend-btn');
        const resultsDiv = document.getElementById('results');
        const errorMsgDiv = document.getElementById('error-msg');
        const resultsTitle = document.getElementById('results-title');
        const dataList = document.getElementById('movie-list');
        let mySwiper = null; // To hold the swiper instance

        // Populate datalist
        movies.forEach(movie => {
            const option = document.createElement('option');
            option.value = movie.title;
            dataList.appendChild(option);
        });

        // --- TF-IDF and Cosine Similarity Functions ---
        function tokenize(text) {
            return text.toLowerCase().match(/\b\w+\b/g) || [];
        }

        function calculateTf(tokens) {
            const tf = {};
            tokens.forEach(token => {
                tf[token] = (tf[token] || 0) + 1;
            });
            for (const token in tf) {
                tf[token] /= tokens.length;
            }
            return tf;
        }

        function calculateIdf(docsTokens) {
            const idf = {};
            const docCount = docsTokens.length;
            const allTokens = new Set([].concat(...docsTokens));
            allTokens.forEach(token => {
                const docsWithToken = docsTokens.filter(docTokens => docTokens.includes(token)).length;
                idf[token] = Math.log(docCount / (1 + docsWithToken));
            });
            return idf;
        }

        function calculateTfIdf(tf, idf) {
            const tfIdf = {};
            for (const token in tf) {
                if (idf[token]) {
                    tfIdf[token] = tf[token] * idf[token];
                }
            }
            return tfIdf;
        }

        function cosineSimilarity(vecA, vecB) {
            let dotProduct = 0;
            let magnitudeA = 0;
            let magnitudeB = 0;
            const allTokens = new Set([...Object.keys(vecA), ...Object.keys(vecB)]);
            allTokens.forEach(token => {
                const valA = vecA[token] || 0;
                const valB = vecB[token] || 0;
                dotProduct += valA * valB;
                magnitudeA += valA * valA;
                magnitudeB += valB * valB;
            });
            magnitudeA = Math.sqrt(magnitudeA);
            magnitudeB = Math.sqrt(magnitudeB);
            if (magnitudeA === 0 || magnitudeB === 0) return 0;
            return dotProduct / (magnitudeA * magnitudeB);
        }

        // --- Main Recommendation Logic ---
        const allDocsTokens = movies.map(movie => tokenize(movie.overview));
        const idf = calculateIdf(allDocsTokens);
        const movieVectors = movies.map((movie, i) => {
            const tf = calculateTf(allDocsTokens[i]);
            return calculateTfIdf(tf, idf);
        });

        function getRecommendations(title) {
            errorMsgDiv.textContent = '';
            const movieIndex = movies.findIndex(m => m.title.toLowerCase() === title.toLowerCase());
            if (movieIndex === -1) {
                errorMsgDiv.textContent = 'Movie not found in our list. Please select one from the dropdown.';
                return;
            }

            const targetVector = movieVectors[movieIndex];
            const similarities = movies.map((movie, i) => {
                if (i === movieIndex) return null;
                return {
                    title: movie.title,
                    overview: movie.overview,
                    poster: movie.poster,
                    rating: movie.rating,
                    similarity: cosineSimilarity(targetVector, movieVectors[i])
                };
            }).filter(Boolean);

            similarities.sort((a, b) => b.similarity - a.similarity);
            displayResults(similarities.slice(0, 5));
        }
        
        function displayResults(recommendations) {
            if (mySwiper) {
                mySwiper.destroy(true, true);
                mySwiper = null;
            }

            resultsDiv.innerHTML = '';
            if (recommendations.length === 0) {
                 resultsTitle.classList.add('hidden');
                 return;
            }
            
            resultsTitle.classList.remove('hidden');

            recommendations.forEach(rec => {
                const card = `
                    <div class="swiper-slide">
                        <div class="frosted-glass rounded-lg h-full flex flex-col overflow-hidden">
                           <img src="${rec.poster}" alt="Poster for ${rec.title}" class="w-full h-auto object-cover">
                           <div class="p-4 flex flex-col flex-grow justify-between">
                             <h5 class="font-bold text-lg text-gray-800">${rec.title}</h5>
                             <div class="flex items-center justify-center mt-2">
                                <svg class="w-5 h-5 text-yellow-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"></path></svg>
                                <span class="ml-1 text-gray-800 font-bold">${rec.rating}</span>
                             </div>
                           </div>
                        </div>
                    </div>
                `;
                resultsDiv.innerHTML += card;
            });

            mySwiper = new Swiper('.mySwiper', {
                effect: 'coverflow',
                grabCursor: true,
                centeredSlides: true,
                slidesPerView: 'auto',
                loop: true,
                autoplay: {
                    delay: 3000,
                    disableOnInteraction: false,
                },
                coverflowEffect: {
                    rotate: 50,
                    stretch: 0,
                    depth: 100,
                    modifier: 1,
                    slideShadows: true,
                },
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                },
                navigation: {
                    nextEl: '.swiper-button-next',
                    prevEl: '.swiper-button-prev',
                },
            });

            if (expanderContent.style.maxHeight) {
                expanderContent.style.maxHeight = expanderContent.scrollHeight + "px";
            }
        }
        
        recommendBtn.addEventListener('click', () => {
             const title = movieInput.value;
             if(title) getRecommendations(title);
        });

        movieInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                 const title = movieInput.value;
                 if(title) getRecommendations(title);
            }
        });

        // --- Auto-collapse recommender on scroll ---
        const testimonialsSection = document.getElementById('testimonials-section');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                // If the testimonials section is visible and the recommender is open
                if (entry.isIntersecting && expanderContent.style.maxHeight) {
                    expanderContent.style.maxHeight = null; // Collapse it
                }
            });
        }, { threshold: 0.1 }); // Triggers when 10% of the section is visible

        observer.observe(testimonialsSection);

        // --- AI Growth Chart Logic ---
        const ctx = document.getElementById('aiGrowthChart').getContext('2d');
        const aiGrowthChart = new Chart(ctx, {
            type: 'line',
            data: {
                labels: ['2020', '2021', '2022', '2023', '2024', '2025 (Est.)'],
                datasets: [{
                    label: 'Global AI Market Size ($B)',
                    data: [93.5, 125, 156.5, 196.6, 245.8, 304.7],
                    backgroundColor: 'rgba(231, 60, 126, 0.3)',
                    borderColor: 'rgba(231, 60, 126, 1)',
                    borderWidth: 3,
                    tension: 0.4,
                    fill: true,
                }]
            },
            options: {
                responsive: true,
                scales: {
                    y: { 
                        beginAtZero: true,
                        ticks: { color: '#374151', font: { weight: 'bold' } },
                        grid: { color: 'rgba(255, 255, 255, 0.2)' }
                    },
                    x: {
                        ticks: { color: '#374151', font: { weight: 'bold' } },
                        grid: { color: 'rgba(255, 255, 255, 0.2)' }
                    }
                },
                plugins: {
                    legend: {
                        labels: {
                            color: '#1f2937', // Dark gray legend text
                            font: { size: 14, weight: 'bold' }
                        }
                    }
                }
            }
        });
    </script>
</body>
</html>



